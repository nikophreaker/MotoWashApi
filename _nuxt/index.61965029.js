import{u as f}from"./vue.f36acd1f.05636712.js";import{f as b,v as o,r as u,K as h,s as v,o as x,c as T,a as l,b as r,w as c,u as e,d as _,n as V,L as y}from"./entry.b4992638.js";const k={class:"text-white flex justify-center pt-40"},E=l("div",{class:"header bg-white dark:bg-gray-900 border-b dark:border-gray-700 text-indigo-900 dark:text-gray-200 p-4 rounded-t"},[l("h1",{class:"text-2xl font-bold text-center"},"Welcome")],-1),M={class:"grid grid-cols-12 gap-2"},R={class:"col-span-12"},q={class:"col-span-12"},U={class:"col-span-12"},B={class:"col-span-12"},I={class:"col-span-12"},N={class:"col-span-12"},A=b({__name:"index",setup(C){f({title:"Register"});const n=o.useToast(),m=u(),i=u(!1);h();const p=[{label:"admin",value:"admin"},{label:"user",value:"user"}],a=v({name:"",email:"",phone:"",password:"",role:""}),g=()=>{i.value=!0,setTimeout(()=>{i.value=!1},1250)},w=async()=>{const d=m.value.validator();if(d.clearErrors(),await d.validate(),d.fail()){n.error({message:d.getErrorMessage()}),g();return}$fetch("/api/admin",{method:"POST",body:{name:a.name,email:a.email,phone:a.phone,password:a.password,role:a.role}}).then(s=>{n.success({message:"Add admin success",lifetime:1e3}),setTimeout(()=>{y("/")},1e3),console.log(s)}).catch(s=>{console.log(s),n.error({message:"Add admin failed",lifetime:3e3})})};return(d,s)=>(x(),T("div",k,[l("div",{class:V(["text-gray-800 rounded-t-lg w-96 shadow-lg p-1 bg-gradient-to-b from-indigo-400 h-20",{"tw-shake":e(i)}])},[E,r(e(o.TwForm),{ref_key:"formRegister",ref:m,name:"register",rules:{name:["required"],email:["required","email"],phone:["required"],password:["required"],role:["required"]},onSubmit:w,class:"body bg-white dark:bg-gray-900 p-4 rounded-b-lg"},{default:c(()=>[l("div",M,[l("div",R,[r(e(o.TwInput),{class:"dark:text-gray-200",modelValue:e(a).name,"onUpdate:modelValue":s[0]||(s[0]=t=>e(a).name=t),name:"name",label:"Name"},null,8,["modelValue"]),r(e(o.TwErrorMessage),{name:"name"})]),l("div",q,[r(e(o.TwInput),{class:"dark:text-gray-200",modelValue:e(a).email,"onUpdate:modelValue":s[1]||(s[1]=t=>e(a).email=t),name:"email",label:"Email"},null,8,["modelValue"]),r(e(o.TwErrorMessage),{name:"email"})]),l("div",U,[r(e(o.TwInput),{class:"dark:text-gray-200",modelValue:e(a).phone,"onUpdate:modelValue":s[2]||(s[2]=t=>e(a).phone=t),name:"phone",label:"Phone"},null,8,["modelValue"]),r(e(o.TwErrorMessage),{name:"phone"})]),l("div",B,[r(e(o.TwInput),{class:"dark:text-gray-200",modelValue:e(a).password,"onUpdate:modelValue":s[3]||(s[3]=t=>e(a).password=t),name:"password",label:"Password",type:"password"},null,8,["modelValue"]),r(e(o.TwErrorMessage),{name:"password"})]),l("div",I,[r(e(o.TwSelect),{class:"dark:text-gray-200",modelValue:e(a).role,"onUpdate:modelValue":s[4]||(s[4]=t=>e(a).role=t),name:"role",label:"Role",items:p},null,8,["modelValue"]),r(e(o.TwErrorMessage),{name:"role"})]),l("div",N,[r(e(o.TwButton),{class:"w-full text-center"},{default:c(()=>[_(" Register ")]),_:1})])])]),_:1},512)],2)]))}});export{A as default};
